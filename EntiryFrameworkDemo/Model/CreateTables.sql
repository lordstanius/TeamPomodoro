CREATE TABLE [dbo].[Pomodoroes] (
    [PomodoroId] [uniqueidentifier] NOT NULL,
    [TaskId] [uniqueidentifier] NOT NULL,
    [StartTime] [datetime],
    [DurationInMin] [int] NOT NULL,
    [IsSuccessfull] [bit],
    CONSTRAINT [PK_dbo.Pomodoroes] PRIMARY KEY ([PomodoroId])
)
CREATE INDEX [IX_TaskId] ON [dbo].[Pomodoroes]([TaskId])
CREATE TABLE [dbo].[Tasks] (
    [TaskId] [uniqueidentifier] NOT NULL,
    [Name] [nvarchar](50),
    [PomodoroCount] [int] NOT NULL,
    [UserId] [uniqueidentifier] NOT NULL,
    [ProjectId] [uniqueidentifier] NOT NULL,
    CONSTRAINT [PK_dbo.Tasks] PRIMARY KEY ([TaskId])
)
CREATE INDEX [IX_UserId] ON [dbo].[Tasks]([UserId])
CREATE INDEX [IX_ProjectId] ON [dbo].[Tasks]([ProjectId])
CREATE TABLE [dbo].[Projects] (
    [ProjectId] [uniqueidentifier] NOT NULL,
    [Name] [nvarchar](50),
    CONSTRAINT [PK_dbo.Projects] PRIMARY KEY ([ProjectId])
)
CREATE TABLE [dbo].[Users] (
    [UserId] [uniqueidentifier] NOT NULL,
    [UserName] [nvarchar](20),
    [Password] [nvarchar](20),
    [ShowWarningAfterPomodoroExpires] [bit] NOT NULL,
    [PomodoroDurationInMin] [int] NOT NULL,
    [TeamId] [uniqueidentifier],
    [CurrentUserTeamId] [uniqueidentifier],
    CONSTRAINT [PK_dbo.Users] PRIMARY KEY ([UserId])
)
CREATE INDEX [IX_TeamId] ON [dbo].[Users]([TeamId])
CREATE TABLE [dbo].[Teams] (
    [TeamId] [uniqueidentifier] NOT NULL,
    [Name] [nvarchar](20),
    CONSTRAINT [PK_dbo.Teams] PRIMARY KEY ([TeamId])
)
CREATE TABLE [dbo].[UserTeams] (
    [UserTeamId] [uniqueidentifier] NOT NULL,
    [TeamId] [uniqueidentifier],
    [UserId] [uniqueidentifier] NOT NULL,
    [StartTime] [datetime],
    [StopTime] [datetime],
    CONSTRAINT [PK_dbo.UserTeams] PRIMARY KEY ([UserTeamId])
)
CREATE INDEX [IX_TeamId] ON [dbo].[UserTeams]([TeamId])
CREATE INDEX [IX_UserId] ON [dbo].[UserTeams]([UserId])
ALTER TABLE [dbo].[Pomodoroes] ADD CONSTRAINT [FK_dbo.Pomodoroes_dbo.Tasks_TaskId] FOREIGN KEY ([TaskId]) REFERENCES [dbo].[Tasks] ([TaskId]) ON DELETE CASCADE
ALTER TABLE [dbo].[Tasks] ADD CONSTRAINT [FK_dbo.Tasks_dbo.Projects_ProjectId] FOREIGN KEY ([ProjectId]) REFERENCES [dbo].[Projects] ([ProjectId]) ON DELETE CASCADE
ALTER TABLE [dbo].[Tasks] ADD CONSTRAINT [FK_dbo.Tasks_dbo.Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[Users] ([UserId]) ON DELETE CASCADE
ALTER TABLE [dbo].[Users] ADD CONSTRAINT [FK_dbo.Users_dbo.Teams_TeamId] FOREIGN KEY ([TeamId]) REFERENCES [dbo].[Teams] ([TeamId])
ALTER TABLE [dbo].[UserTeams] ADD CONSTRAINT [FK_dbo.UserTeams_dbo.Teams_TeamId] FOREIGN KEY ([TeamId]) REFERENCES [dbo].[Teams] ([TeamId])
ALTER TABLE [dbo].[UserTeams] ADD CONSTRAINT [FK_dbo.UserTeams_dbo.Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[Users] ([UserId]) ON DELETE CASCADE
CREATE TABLE [dbo].[__MigrationHistory] (
    [MigrationId] [nvarchar](150) NOT NULL,
    [ContextKey] [nvarchar](300) NOT NULL,
    [Model] [varbinary](max) NOT NULL,
    [ProductVersion] [nvarchar](32) NOT NULL,
    CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY ([MigrationId], [ContextKey])
)
INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
VALUES (N'201606231637180_initial', N'Model.Migrations.Configuration',  0x1F8B0800000000000400D55C5B6FE434147E47E23F447944CBA4ED0A09AA195099B6A882B6AB9D7279ABDCC43335244E489C6E2BC42FE3819FC45FC0CED5F125712E9369B552B589EDE3639FCFE7E29C33FFFDF3EFF2BBE7C0B79E609CA010AFECE3C5916D41EC861EC2BB959D92ED975FDBDF7DFBF967CB0B2F78B67E29FBBD67FDE8489CACEC4742A253C749DC471880641120370E93704B166E1838C00B9D93A3A36F9CE36307521236A56559CB8F29262880D9037D5C87D8851149817F1D7AD04F8AF7B4659351B56E40009308B87065673D6CEBCC47804EBE81FED6B600C6210184B276FA730237240EF16E13D117C0BF7B8920EDB7057E020B964FEBEEA6DC1F9D30EE9D7A6049CA4D1312063D091EBF2FB6C311870FDA54BBDA2EBA61177463C90B5B75B6692BFB4318845E1887B6254E76BAF663D6B1D8D345D9F39D953DBFABC44D51C1FEBDB3D6A94FD218AE304C490C688F0FE9838FDC1FE1CB5DF807C42B9CFA3ECF0DE587B6355ED0571FE230823179F908B7028F579E6D39CDF18E48A01AAE189BAFE68714D1FFDF505EC0830F2BD93BAD64EE40F2C748121B02627247615D52390704E6CFED03CFD33813C815BE46B81C7C85C9FB93DE3C5C259BD47561926C99280A52DF87A10F0196C6DE8027B4CB66566C866D7D847ED6983CA2283F690BD6705FEE78625B9771187C0CFD6248DD727F07E21D24948150D9BC09D3D81516B3746AECB6223AE7AE0BCDACD7FC482E61D417C513C08FFD2D0950154815B86D5D83E79F20DE91C795FD15D5D897E8197AE58B82E8CF1851754FC79038ED9CA394E03AA40A7C1C52A9A28E47AE983EFE0E5DD2978A16F61CB0C760BF04B706FBE5D130E62A5FA592A7A2ED9E4DD160A9D1209DC666ABEA30B631C424A7E48635C8ACD46F253EB8A6511AA1DAA24E1397773C8085ABA1DADBC00D43F91CDAA1D580A84F912162C533A4C6F320B0E4F0ED420AEB353F4C4AA5D8172313285346A203242793981090249FC2D8DBF73C9BC7F0D3AF20C694F8D996C0B854C017CF118A6122F9467D6D4F416E42DFED0E82401462FB88751AC71013263A83C1034E6BA74617CFA942D91B734157A036BCB4E19E116E1ADDEAADEC6CD64D436C1B1BAEDF8E8AB8B8235583D2CCD5ADE37CDF6C933A7D5FDAEB00BE6F01C1DEBEAF02BAD35AB7610AA515241A1FB10BAA926F28A37862A8E688514035FFA3836AF66714544B5266B6F63090E535E7109B3B0174FB6BFD098CFDE0AB8A0D0923A371FDD5BC2162551647C6F324B18C81AAD772D3300426E7E72C494217656C7066990B389B2BBAC09ED51E7DE6CAB08C5CA93EA4670845F4D4D0C957F6B12D9E8E5B7C0E7D48A075E6E637996B90B8C093454B17E0193253A9979A99FA3EB2C9D017D23CF49842E6DE20E0AFA96CE8C14798C8671A611745C06FDD0D61548FAB1BB6DE6A0EB1E51C46107B94C5D6D58F9BBC9A431042D7EE2C1D0E51ED406BC6643AD16A02344EB265143E0BD234371CEDA89F0864CAAD3011B3F61AA017CC944B1F3DFD0C40E3C2099D5855B1452DD35C19CF822FD5B5D52CE09277C044B4EA9B835EB092573C6EE21900C5F9DB5A8BA470BE393966BE46538E478BC5B1244A2541053054089DCAB4492B31B22C4AF7B69F5993563C6EE299344DED4CB69D718567D994A60A22B244754455BAC3147383D58734FD4C4051EEE7DBC14A76763BC5DAF4FB27C24AF3DE684683370E633CDB335A29490EAFCC50E5111E1D43E808184B1F4F3181CFAAAF5594C5E26A2429EEA444E030BA1B48E40F96755029C55912FA9A448AEB5D8940EEE2740C2E3C4A25036538D041A2B82E93C6E7D0EF623EBF009399CF0EA2C1CC3A02F569168870226FEE21FF6D98EBA4FE7A2C62B0339CAF78AF0426E1B8330AE76870BC8A2AA2B94083C50B9FF4E4B5B7C497061126CF7585B696C5AB03C3AEFD1BB06EFEE388BC685DACD315ED708C1627A365AD8A20650F0BE56FB515C8D6F8E05D5E38CF687E08DB102D3BDD5D1B3550A2DC15A45AA81AB7D2C0B11438EE5EB5DA95ECDAB8310BCF956ECBC2651FC9C04B1ABEF0865F3442E2E5AD6B6593ABB6A593E798162F968E261975790DA208E11D979C5ABCB1367966EAFACB4DFFFCCD20A7E1B88DD3237A10D54C248CC10E0AAD746ACAE9258A13720E087800EC03C0DA0BA46EA207A2318FE56CA29321CBAB349AE508F6FF7C5433A554E1A015432EE97A02E6DDB1A541858592875A2C2D18F8206EC9045D877E1AE0AEECD2366AE58D2C4F49774BABA7C27D68E10971AFCD6909A9063C3DA1C99CA6902FCAD3149A649A4B4790A1E4584B0091A29126E28CF0A8B3A95D58CCFCD9FE38540FDB2F6AF2CFD93C8DFC8D3905215153751C8A26739A6500C513D305552D9CD577D00DAEF457D307435AE56E0E507C45F03340EFE9464EB9A1E381772091E8FCCC2E79A8DC160361A887EDF780D48978229DDE4AA04AB56B00A37ADBC38C7525D3358C5B57E7FE6AACC5F469BAF430F4C5DD6343656BEE23F55414A9783C4145F3AB3953B93B3EC0A02A62201383AA1CB65FE9BC09BD36540ED555D530FDD64F1E3A80B7237BBFD29D46EF4EE9AAD769524D52E5DB99712745BF62976AF62A0A16A2DD65117976D7674AA168DEC5B6E8163D218F85A19B9784C060C13A2C367FFA6B1F41E689961DAE01465B98903CB5CF3E393A3E11EA3D5F4FEDA593249EAF88DC5505984D791DA03032C5E8CF1422F6A5036D11BBE81955242993933E685C610F3EAFECBFB2F1A7D6D56FF7398977D66D4C257D6A1D597F8F4F5EF40081247BAE299994082873F71183E21455970F88B433D4AFE071007AA629461C8D9A1B2E391B3F81D87D04B1547CD44F72CA3AC421926BE6D20E42744E6214A2A512AF418C54547AF0D2BBC46E88129BB0F6EDF060EC57673660BBA6A9011BBD51623D9872B34EFA9F5CA1FC6B22B286D55E824E1E5FE93544E73433FE8759D18C84EE9C9B6C98B674AC0D38636C989C87356351D1FED5461764FB97CD0C541DD395B38C77175F03D05F87859FCC67150B70CCE8ECA5E8E45035267566D3BC6525735591B47C347DCB852307AC153142EBB4B5213396831863F38D947F1CAAE2634E9468BE47ED2563D6181F6FA194636CF58611C0262CD89833F5FE0DA5DAB796654C2567898E798AFE9B90F704F3BDAAF28A4396FACD8D95390D402FAC1CBC4C42CE6514E5A62E8268AD81C83F42D170E981850D799854B6CA2909CA1A096D89848AB63AF55A533DD1563CA1645C9306AF2C70D05656A828ABD36A554517DA9A0BE56E28D39475E518ADD5183AAED553CC51AC21A5DCB7572708686DE6BABEBE620C55FD4567ED49E7961CAEDA42CA223FC86226AAA8906A013A93EA3B977FC8AA89614B9246694BB70E5C17D10F7A532DAD47E5839CE3418D3BF74BDDD4B148D0AE26C17EB71B43B761D6AB3E57781B96DE85C051D945B8DABC860478D4E69FC5046D814B6833FBA69EFD98D72FC04F69978BE0017A57F83625514AE89261F0E0BFF09BC1BC94B6F9B3F28E26CFCBDB28FBED9F299640D944EC46F6167F9F22DFABF8BE547C79D59060EECF0F90BECF6549BD2902772F15A59B101B122AB6AFF2DAEE6010F99458728B37E0090EE18DC2EF27B803EE4B99AAA327D22D88E6B62FCF11D8C5D4861734EAF1F49162D80B9EBFFD1FB0303581B05E0000 , N'6.1.3-40302')

