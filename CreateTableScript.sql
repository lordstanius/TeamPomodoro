CREATE TABLE [dbo].[Pomodoroes] (
    [PomodoroId] [uniqueidentifier] NOT NULL,
    [TaskId] [uniqueidentifier] NOT NULL,
    [StartTime] [datetime],
    [DurationInMin] [int] NOT NULL,
    [IsSuccessfull] [bit],
    CONSTRAINT [PK_dbo.Pomodoroes] PRIMARY KEY ([PomodoroId])
)
CREATE INDEX [IX_TaskId] ON [dbo].[Pomodoroes]([TaskId])
CREATE TABLE [dbo].[Tasks] (
    [TaskId] [uniqueidentifier] NOT NULL,
    [Name] [nvarchar](50),
    [PomodoroCount] [int] NOT NULL,
    [UserId] [uniqueidentifier] NOT NULL,
    [ProjectId] [uniqueidentifier] NOT NULL,
    [TeamId] [uniqueidentifier],
    CONSTRAINT [PK_dbo.Tasks] PRIMARY KEY ([TaskId])
)
CREATE INDEX [IX_UserId] ON [dbo].[Tasks]([UserId])
CREATE INDEX [IX_ProjectId] ON [dbo].[Tasks]([ProjectId])
CREATE INDEX [IX_TeamId] ON [dbo].[Tasks]([TeamId])
CREATE TABLE [dbo].[Projects] (
    [ProjectId] [uniqueidentifier] NOT NULL,
    [Name] [nvarchar](50),
    CONSTRAINT [PK_dbo.Projects] PRIMARY KEY ([ProjectId])
)
CREATE TABLE [dbo].[Teams] (
    [TeamId] [uniqueidentifier] NOT NULL,
    [Name] [nvarchar](20),
    CONSTRAINT [PK_dbo.Teams] PRIMARY KEY ([TeamId])
)
CREATE TABLE [dbo].[Users] (
    [UserId] [uniqueidentifier] NOT NULL,
    [UserName] [nvarchar](20),
    [Password] [nvarchar](64),
    [ShowWarningAfterPomodoroExpires] [bit] NOT NULL,
    [PomodoroDurationInMin] [int] NOT NULL,
    [TeamId] [uniqueidentifier],
    [CurrentUserTeamId] [uniqueidentifier],
    CONSTRAINT [PK_dbo.Users] PRIMARY KEY ([UserId])
)
CREATE INDEX [IX_TeamId] ON [dbo].[Users]([TeamId])
CREATE TABLE [dbo].[UserTeams] (
    [UserTeamId] [uniqueidentifier] NOT NULL,
    [TeamId] [uniqueidentifier],
    [UserId] [uniqueidentifier] NOT NULL,
    [StartTime] [datetime],
    [StopTime] [datetime],
    CONSTRAINT [PK_dbo.UserTeams] PRIMARY KEY ([UserTeamId])
)
CREATE INDEX [IX_TeamId] ON [dbo].[UserTeams]([TeamId])
CREATE INDEX [IX_UserId] ON [dbo].[UserTeams]([UserId])
ALTER TABLE [dbo].[Pomodoroes] ADD CONSTRAINT [FK_dbo.Pomodoroes_dbo.Tasks_TaskId] FOREIGN KEY ([TaskId]) REFERENCES [dbo].[Tasks] ([TaskId]) ON DELETE CASCADE
ALTER TABLE [dbo].[Tasks] ADD CONSTRAINT [FK_dbo.Tasks_dbo.Projects_ProjectId] FOREIGN KEY ([ProjectId]) REFERENCES [dbo].[Projects] ([ProjectId]) ON DELETE CASCADE
ALTER TABLE [dbo].[Tasks] ADD CONSTRAINT [FK_dbo.Tasks_dbo.Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[Users] ([UserId]) ON DELETE CASCADE
ALTER TABLE [dbo].[Tasks] ADD CONSTRAINT [FK_dbo.Tasks_dbo.Teams_TeamId] FOREIGN KEY ([TeamId]) REFERENCES [dbo].[Teams] ([TeamId])
ALTER TABLE [dbo].[Users] ADD CONSTRAINT [FK_dbo.Users_dbo.Teams_TeamId] FOREIGN KEY ([TeamId]) REFERENCES [dbo].[Teams] ([TeamId])
ALTER TABLE [dbo].[UserTeams] ADD CONSTRAINT [FK_dbo.UserTeams_dbo.Teams_TeamId] FOREIGN KEY ([TeamId]) REFERENCES [dbo].[Teams] ([TeamId])
ALTER TABLE [dbo].[UserTeams] ADD CONSTRAINT [FK_dbo.UserTeams_dbo.Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[Users] ([UserId]) ON DELETE CASCADE
CREATE TABLE [dbo].[__MigrationHistory] (
    [MigrationId] [nvarchar](150) NOT NULL,
    [ContextKey] [nvarchar](300) NOT NULL,
    [Model] [varbinary](max) NOT NULL,
    [ProductVersion] [nvarchar](32) NOT NULL,
    CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY ([MigrationId], [ContextKey])
)
INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
VALUES (N'201607181915489_initial', N'Model.Migrations.Configuration',  0x1F8B0800000000000400D55D6D6FE4B611FE5EA0FF41D0C7E2B2B27D6DD11ABB099CB51D188DCF875B27EDB7032D71D76C246A23518E8DA2BFAC1FFA93FA174A8A7AA1F822512FAB5D2340702B92C321E799E10C3973F7BFFFFC77F9DD6B143A2F3049518C57EEF9E2CC7520F6E300E1DDCACDC8F69BBFB8DF7DFBFBDF2D6F82E8D5F9B9ECF791F5A32371BA729F09D95F7A5EEA3FC308A48B08F9499CC65BB2F0E3C80341EC5D9C9DFDD53B3FF72025E1525A8EB3FC9261822298FFA03FD731F6E19E6420BC8F0318A6C577DAB2C9A93A9F4004D33DF0E1CACD7BB8CE5588009D7C03C3ADEB008C63020865EDF2A7146E4812E3DD664F3F80F0F16D0F69BF2D085358B07C5977B7E5FEEC8271EFD5034B527E969238EA49F0FC63B11D9E3C7CD0A6BAD576D10DBBA11B4BDED8AAF34D5BB99FE3280EE224761D79B2CB7598B08EC59E2ECA9E1F9CFCF7874ADC1415ECBF0FCE3A0B4996C01586194900EDF1397B0A91FF37F8F618FF02F10A6761287243F9A16D8D0FF4D3E724DEC384BC7D815B89C7BBC075BCE6784F26500DD78CE5ABF92143F4CF9F282FE0298495ECBD56328F20FD6524890D010979A4B02EA95C0302F9EFF681D759920BE40EDF235C0EBEC3E4E3456F1EEED24DE6FB304DB74C1405A9EFE33884002B633F8117B4CB67D66C86EB7C8161DE983EA33DD7B4056BF85AEE384C5DE73689A32F71588C119ABE3E826407096521D6B76FE22CF1A5F52CBD1ABEADA0E60C76019AF59A1FCC2592FA02790204B2FF9704A815A436DC75EEC1EB8F10EFC8F3CAFD1335DAB7E81506E58782E84F18518B4FC79024EB9CA314E13AA6367C1C58A9AD4E46AE98FEFC27F4C958E587209249D8EA8AA80DE334A6D40893C6941A65CD19DF1B2D5B45DB57364783A94683A2C4CD569D0AB79A15BACDE64DE2ADD2F6B08FFA8DC95BFA6E09439C9603D6A06E46FD55D909A1699425AB84D4793AF38E47389C6B15EB7D364FA29D07B16AAD679F5E952D754646AB5EA3861D7BB98A741E7BB4D7118EBDC286F63EF634B6775A805C4C0B10A6F97A80709B2099B1EAA3C1848806AE0F0B6CA0990D3EA18695AA41CB4EDD3ACAA87133DB8553D66B7E9C964E475F9C4EE0AC301207C1AA6C76419AFE162741CB3C7FFEE304F36C9EE3DFFE0E124C895F6D094C4A5FE5E6758F12E6EB48E1475FDFAE2037617864E1E84923D65992404C4AE518EA259A4F954ECF433E4F344EC96807ACC372E95918EA8059582E6E403496AB58BCC172E5ADA32D97DD295BF63C8E051B7ADA9A707C703D9AC07C0EBE5FD990786F356E98E2589CB53A05524FE249A2180BFD3172D3D02E1BFDB94AD3D847391B82A113E3DDE6926E70E07404BFFCC42AA3427A68512D427BAA3774FA957BEECAFAF180AF61080974AE7C7E01BB06A90F0255B87409812D379585A9B9A9EF519B1CFD4199886A2A64670602E19A8A87EA3EC244556B847DB40761FB7E48C37A5C38B1155793C82DD7700F7140796C5FFFB8D9AB49243974EDCFD21360D58EB666486692AE213E13645B06E1B380CD70C5D20EFC8960A6DD0A1B311B6F017AE14CBBF4D1D3CF0034C14B338955E7B2D532E51679167CE96EAD660197BA0336A2D50764BD60A5AE78DCC4B3018A390DED626C780FED7052A5A823A68344EEBB34899D2D16E753A24298DAEA54D1FAB7034021ECDFB87967C244ED4CB68952E35936B1A11369173E345743736244997E469C28FBF97EB0925B824EB136FDFE89B0D20CC6673CEBC6614C647BC6034A91C3C99F51F5B35C6BDC64B243769E868ED8ECF647997A26DBA3ECDF89D91D1EF5D331848E8089920280097CD5BD5D52D816D7656971952C0B9DD1DD4022514C5DA7BE6850026F05394D22C525AA4280E3B063701160681928A3C3AEF9F9BDA63A7F0EDD8EC1C5AB923298DB528BC1A6D96B0B2F111144DEDCC346BA82D0CB90D120A3B0FB8EA762BF929902E5EEAB198188801EF9E8682ED26203A4475E75F92D570E16970E22D715E25A56AFBF2BE8DAC001EB169F21D4459BC2DFAE005860B40078CB5A3571EBC1169A2B84699DCA89D711970D58A578CA898BE44A3CC922856B69FD420DA18645B0212D58CBB5457871C88573BBD9B270D56FB6F09C872FBCE12B770166C0C285142A83C9EE90B4EACAF537D35349B77C6EA81C8FAA6DE9F18CF0E2C3D233A48E2FEFC17E8FF04E48252FBE381B9E47BEFE66D33FDB3AE2343CBF61076537A99A89C409D841A9954E4D39BD45494AAE01014F80BD7CAD8348E926BB59061FA09C4DF6A45459959E413982FD998F6A26806BBCD062C82D5D4FC4DC57B634A83982D5A10E4BE20721485AF2B6D7719845B82B17BC8D5AF90A215232BD4C98A9082F8C2221E1B33D2D296B41A42735D9D394B2BB459A52934A73E9493254A20705204A18DE449C151E4D4E43171673A7BD3F0EF5C30E8B1A9ED223D2E05FEC294839D53A75289AEC699637072231D36D420B67F5BB4B832BF3734CCB6E17716B63B70DB1ECD1F05A79E503CC6711270EB09EA6917388C51EBEC73221B9F730C084681C1E1B13A21D360DA8DFAD0CB89BDA5F063A2FDB4206FA618735757576A64CA7B739AFF22F1BCA597DEDE19074655836DC94AECEFD0FA41627C6D0E550C781898A263F5324A8693E299D1A6ADBAA5BBD61BAD5CFC69936B77D570F2BF769747E4A87BFCE326C922ABFCE8C3B258696BB54B357B1B414332F8BF8B5BB265B09687917D7A15BF4820216CC6EDE5202A305EBB0D8FC1AAE4304993F5B76B807186D614A7866AC7B71767E21D5789F4EBDB597A641A889FF7545D74D791DA1183AC3E8D70C22F62884B688DD898D2A8C56C9296F3F773880AF2BF75FF9F84BE7EE1F5F39890FCE4342257DE99C39FF1E9FFB1B000249FEBBA66453B3A02D26400C8A53545A3F21D2CE50BF0AE701E899A6FA78346AB8CBC489E11790F8CF2051AAF6FA494E5B783C4472CD54F44188E62446215AA98D1CC4484565142FCD74FE613A9E933071314211B4B1F1FC95ABC7D7887E55A2434CC724159C87DFA88BA9364A933A356309E1E88D92CB09076D9606FA52F5A0962CAB1FEC47D6B258503A41C7170A0E39218E600F55268C95876DC019A90D434DC7B42569E37DD65390DF69B8199339CE72119D1D9DC3148E1DAB4CAC4E459BB7306CAE32B09607E0F75CF875C45A2F2BB44E5BDB356339973536DF49F9D6B12AB6E64489E145E62069EFD6F838F1522C9E5735241BBD27BEA63A33F42F03072B9F39B5B4F5A1A55553C959A1635F66F32EE43DC17C27552275CC4ADDB9B132A7FDEF8595532F759AC036CC79CECF6913EC639463972EA9A9B7B2ACF48549AD7549FCB59386C44F2C32E4A1B058436351B7642C5BD2D1D6974228AC97818ECA79D9A265DC5096A22D7732563B69D9D66681CB64B9F955C8F2CF3AB2FA0C7A1D5903C7759389BC9EF3790AA8943CFCF67A2109AFCDE4ECD32B8FD2554475D619746EC9F1EA9F94DA8E232E66448D93A82975526457A14BE7E28F59C9346C49CA286339E5916B95FA01EFD04B1B5F8DD45B5A6375A947CD919A1745FD14E15FB4A0FE518A763509F6EF5B60E8373C94AACF1DDEC6A5A324715476916EE2EF210101755FAE1282B6C027B499E5A1E47FC5E7CF20CC68979BE8090677F82123FB8CD025C3E8297C133783395C6DF3E785554D9E970FFBFCAF9B9B6209944DC41E101EF0F7190A838AEF5BF549C3448279723F40FA9DCB923A8604EEDE2A4A9F626C49A8D8BECA017D84D13EA4C4D207BC012F70086F54937E843BE0BF95E96D6622DD82686EFBF21A815D42DD9182463D9EFEA4180EA2D76FFF0FEE7E442AD8650000 , N'6.1.3-40302')

