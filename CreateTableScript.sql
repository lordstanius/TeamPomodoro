CREATE TABLE [dbo].[Pomodoroes] (
    [PomodoroId] [uniqueidentifier] NOT NULL,
    [TaskId] [uniqueidentifier] NOT NULL,
    [StartTime] [datetime],
    [DurationInMin] [int] NOT NULL,
    [IsSuccessfull] [bit],
    CONSTRAINT [PK_dbo.Pomodoroes] PRIMARY KEY ([PomodoroId])
)
CREATE INDEX [IX_TaskId] ON [dbo].[Pomodoroes]([TaskId])
CREATE TABLE [dbo].[Tasks] (
    [TaskId] [uniqueidentifier] NOT NULL,
    [Name] [nvarchar](50),
    [PomodoroCount] [int] NOT NULL,
    [UserId] [uniqueidentifier] NOT NULL,
    [ProjectId] [uniqueidentifier] NOT NULL,
    CONSTRAINT [PK_dbo.Tasks] PRIMARY KEY ([TaskId])
)
CREATE INDEX [IX_UserId] ON [dbo].[Tasks]([UserId])
CREATE INDEX [IX_ProjectId] ON [dbo].[Tasks]([ProjectId])
CREATE TABLE [dbo].[Projects] (
    [ProjectId] [uniqueidentifier] NOT NULL,
    [Name] [nvarchar](50),
    CONSTRAINT [PK_dbo.Projects] PRIMARY KEY ([ProjectId])
)
CREATE TABLE [dbo].[Users] (
    [UserId] [uniqueidentifier] NOT NULL,
    [UserName] [nvarchar](20),
    [Password] [nvarchar](20),
    [ShowWarningAfterPomodoroExpires] [bit] NOT NULL,
    [PomodoroDurationInMin] [int] NOT NULL,
    [TeamId] [uniqueidentifier],
    [CurrentUserTeamId] [uniqueidentifier],
    [User_UserId] [uniqueidentifier],
    CONSTRAINT [PK_dbo.Users] PRIMARY KEY ([UserId])
)
CREATE INDEX [IX_TeamId] ON [dbo].[Users]([TeamId])
CREATE INDEX [IX_User_UserId] ON [dbo].[Users]([User_UserId])
CREATE TABLE [dbo].[Teams] (
    [TeamId] [uniqueidentifier] NOT NULL,
    [Name] [nvarchar](20),
    CONSTRAINT [PK_dbo.Teams] PRIMARY KEY ([TeamId])
)
CREATE TABLE [dbo].[UserTeams] (
    [UserTeamId] [uniqueidentifier] NOT NULL,
    [TeamId] [uniqueidentifier],
    [UserId] [uniqueidentifier] NOT NULL,
    [StartTime] [datetime],
    [StopTime] [datetime],
    CONSTRAINT [PK_dbo.UserTeams] PRIMARY KEY ([UserTeamId])
)
CREATE INDEX [IX_TeamId] ON [dbo].[UserTeams]([TeamId])
CREATE INDEX [IX_UserId] ON [dbo].[UserTeams]([UserId])
ALTER TABLE [dbo].[Pomodoroes] ADD CONSTRAINT [FK_dbo.Pomodoroes_dbo.Tasks_TaskId] FOREIGN KEY ([TaskId]) REFERENCES [dbo].[Tasks] ([TaskId]) ON DELETE CASCADE
ALTER TABLE [dbo].[Tasks] ADD CONSTRAINT [FK_dbo.Tasks_dbo.Projects_ProjectId] FOREIGN KEY ([ProjectId]) REFERENCES [dbo].[Projects] ([ProjectId]) ON DELETE CASCADE
ALTER TABLE [dbo].[Tasks] ADD CONSTRAINT [FK_dbo.Tasks_dbo.Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[Users] ([UserId]) ON DELETE CASCADE
ALTER TABLE [dbo].[Users] ADD CONSTRAINT [FK_dbo.Users_dbo.Teams_TeamId] FOREIGN KEY ([TeamId]) REFERENCES [dbo].[Teams] ([TeamId])
ALTER TABLE [dbo].[Users] ADD CONSTRAINT [FK_dbo.Users_dbo.Users_User_UserId] FOREIGN KEY ([User_UserId]) REFERENCES [dbo].[Users] ([UserId])
ALTER TABLE [dbo].[UserTeams] ADD CONSTRAINT [FK_dbo.UserTeams_dbo.Teams_TeamId] FOREIGN KEY ([TeamId]) REFERENCES [dbo].[Teams] ([TeamId])
ALTER TABLE [dbo].[UserTeams] ADD CONSTRAINT [FK_dbo.UserTeams_dbo.Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[Users] ([UserId]) ON DELETE CASCADE
CREATE TABLE [dbo].[__MigrationHistory] (
    [MigrationId] [nvarchar](150) NOT NULL,
    [ContextKey] [nvarchar](300) NOT NULL,
    [Model] [varbinary](max) NOT NULL,
    [ProductVersion] [nvarchar](32) NOT NULL,
    CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY ([MigrationId], [ContextKey])
)
INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
VALUES (N'201607111923377_initial', N'Model.Migrations.Configuration',  0x1F8B0800000000000400D55DDD6EE33616BE5FA0EF20E87231B5930C16D80DEC16A99314C63693C138EDEE5DC048B4A356A25C894A132CFA64BDE823F5159614F5CB1F919464D94181C158240F0FCFF97878F8F34DFFFAE3CFC5B7AF51E8BCC0240D62B474CF6767AE039117FB01DA2DDD0C6FBFFEA7FBED375FFD6D71E347AFCE4F65BD8FB41E6989D2A5FB8CF1FE723E4FBD6718817416055E12A7F116CFBC389A033F9E5F9C9DFD6B7E7E3E8744844B6439CEE24B867010C1FC07F9B98A9107F73803E15DECC3302DBE93924D2ED5F9042298EE8107976E5EC375AEC20090CE3730DCBA0E4028C60013D52E7F4CE1062731DA6DF6E403081FDEF690D4DB82308585CA97757553EDCF2EA8F6F3BA6129CACB521C479602CF3F16E698F3CD7B19D5ADCC450C76430C8BDFE8A873A32DDDCF7114FB7112BB0EDFD9E52A4C68C5C2A6B3B2E60727FFFDA172374105FDEF83B3CA429C257089608613406A7CCE9EC2C0FB377C7B887F816889B2306C6A43F42165AD0FE4D3E724DEC304BF7D815B4EC7B5EF3AF376FB392FA06A2E69CB46F37D1690BF7F22BA80A71056BE9F778A7900E92F03456C3048F003817529E51A60C87E7737BCCE92DC216B7417A0B2F11AE18F17D63AACD34DE679304DB7D41585A8EFE2388400096D3F81976097F72C3186EB7C81615E983E077B36D366B4E0B1B4384C5DE73689A32F7158B469143D3E80640731512196976FE22CF1B8F12CE6357C3B41CD14D4019AD69A1ECC25926C813C0202E99FA5001205490C779D3BF0FA03443BFCBC74FF4182F66DF00AFDF24321F4471490884FDAE024D3F651BA701593183E0CAC24562703474C7EFE0C3D6C2B4589FC26B687E1BFC4B70AFFE5FC30D68C8D54AA5651F648FB6829D52A10A664BB543621BB14A2DE531B899572E6A11FE586C94B6426310E09957DB4CB1CAB788455AEC6AAF522D70FE6538487CE45443E8B0CE1CA03450EE65E6061E8D42185D69A1E266554B4C5C808D1948AD080E462943504A4E96F71E21FBA9FCD73FCDB7F408288F0AB2D8649197E6F5EF74142C337971FD92E3E85B811F3B7070822DE89DD2D5659924084A9EB0C1AAB672B692B8FE6A4200FCFEDD5AEFA2A267A75519F25451E32F2F541D0A2FE2A048B4691ED4A5B9A52AD4935445E99AA40B04ABB7458F29BBB4A9BFC925A47487E0B085A27BF12E88EBBBAF50B283DA0AA9D30420224CEA591A1CA1023812AFB4305D5FC8F41502D4599ADB5C7816C3372F659734780AE7DD41F61B1EF7D5CB1C1F1DEA89DFD6263885859B017F13C78236318EA95DA586F6AAED234F6825C8D4612DDDC70B68774837C47B3FB64E1B0DC969188486651B027F38674BF74CF5D7E7EDCA36B18420C9D2B8F9D67AE40EA015F742E19826FAA4D15616A6DEA63C9B6467F173A223315D20C2700E18AB887CCFD0061715A07C80BF620ECB607D7CCE2FC868EB8EA842FB9867B887CA263F7F887F55E75C2F941679FC5BC01AB6EB4B537662AEF2A76690DDF965BF149C0A638E3E806FE4830939AC2C4CDCAB3002B9C49873EB8FB0980D6C8919431449230357C9AAF0F6D9F9ECD66E7825BA50225206121FE30B1481889512090A62476614818F1B08E2700463B0150B952910DB4BD298388E8519550591C31C55C2F9448BB9F0828527BBE1FACE47357EBD676AE361256DA7BFDEE7032EAFA370C634DB54DFC2C3F93EC87B1A61F86F53D11C6340B95EC10AA1B089A854A727465B750D92CC4D55D4D672EAF9A3B66A9954CD8BB993382CA13CD17C1EE273657D80E96B4C1A4054C84DB6184E1ABEC368EA8581CFDA4C5991B0F162A7703312731759D7AD32C6C2205C4B58514374D8200865F4DE32259962A50EE7434228AE340A13D83BC4E7976C0272A9F2F5A063DAB04D42B1F27A4E1F2B60D5B77DF8D5A8AEB711E85FAF38A4AFDCA670294F5C70C0D210DF4F0E1A13D48030370D796E2F03BB6CF061BE8A6D615E23A462FDFF7EA0CD863DCCD036D89CF155B39DD66AEA928C36797A7C5BD5BA37DA1DBE08172A78FE2583B762706FB134E63FDA8E53B129DE1860C9CC5A38E818BA98241B2DD7FE0AD54E1401E57435B95FCE9D23F9DA2BA6CEF00036DBCC951846D8D67C534D03E548FE5CDF2F8BC4A3EAAB2C59C3D182E3E2CE68A97C58B3BB0DF0768D778695C7C7136EC99F1EAEB8DFD63DC88C9987B2DC0F0A952D5138E13B0835C29E99A687A1B2429BE06183C017A93B3F223A11A9F6A29F280B2373E9B127D556607650BFA77D6AAFD3E589289164D6EC978229AC2D2A141C9322C3675E81B6F1082A4E359EF2A0EB308E99E0A77492B4FD59B925427ED6A298D1BB3A6A0C6677359DC9B91A63CAEC85C26F7F8B729932B12652EE69C0F851D84001061BBD5469C111E55A9920E8B79E26E8F4379B3C3A286BD4B68CA605FCC25704F6E65D3A128329759EE149BC254BBC70ECDEA7B849656EAEB85A321ADCAA97B04BE6297D723EEA95A8E69D0E1C03B924B54A995CE1FB254C5C019F266879D20B485E887FAABC554ABDE4CB680517DB558C674AF225B8B9BAEB27D18EB58FA14552C16FAE242A215B21597146A299237954D8192E29399536C73D5634195EC684D165469B3C37AE75DC4B5BE7EA8CEE4FAC5373B7FA800DE8DECC37A779CB83B66AA5EBF776B8B2ABF4E8FBBF6CE58045F79A42103575966B23AD20DBCC43DBAC70C567E7D54DF59347AB7524C79513318709D3A918DB81FE4776BEB94BEC5ACDE611A0E993FF1105D2F1C7CF0552AE0550720DC41C7A23874D0F3AC85530856C575C8F05F029F9E406CDE520CA319AD30DBFC1AAEC200D24D4859E10EA0600B53CC9EE7BA1767E7171C6FFB7438D4F334F543C9A18D8C48DD76DA1108CE190A7ECD60406FF3826D40CFF406919D4571C2A5DD1AF9F075E9FE2F6F7FE9ACFFFBC8447C70EE13E2E94BE7CCF97DF803641F6088F3DFB524139A8F947F1350288EC19E7E0A70B74276ACE51EE81987513C18352CCB62C2D00B48BC67900804423BCF49C9C47D3CD77E0FDF0BD14CC420440B34CD5E8A54522C74B1A6C9F6096223F2578F0F463BAE680F73A916793B1EE76043D5670D1DC6BAB09FB91C857324B1868C4D2E260F676BF689396DD64EBF553417A19AE7260653D23FBB806322B895A80E0CAB9AD83A6449159F094FC8533C7C14D3CD207B265ECF48361E436E78F67A0AF3EE34128ED152689ED36726E7303CB663B1D6EAD784D3F2D4A662A575DCDFBF671EDA11A96746681D976A3621BBCC189BEF844D369440C69E4F4DC7199B92FDF38ED83E9DCCB0B1FC2CC8316709BD0B7F8FD0DF4931BCA625921C172BC6F37544D6D6A9B14F7A33B5C62067B1CB8B691682A99D9D8FCDB4BF8EBBBB29967D2D77ED989161CADC704A9018678547E7A289EFA8795FC999669D4433760B4A36C84F749FC836C64D529401114DC94393C996937804D5CB6D8FA8795922555CC13392B2C894F4359964F9937EC11AF922295A23FF2CB58694F022D35621BA2E52692DEF621A469C40AAE8268071786DBFB43F3DBE9B8CE2A6258D684D723C429B40C5D2F27C04D6CB2991D6FA0D4968557F3C2D5A9AD6F6930F6D04E299FDA058EE3A3E0C0713CCEC8733343C58D0C8C45753245B69FC3F2C48969406BB5A047D0B86A0D7CA53AA3A6BB48DCB7489D3A8ACC29DCEDF410C7C92C45C2538D8020F9362FA4A25FF272E7F026146AADC444FD05FA3FB0CEF334C860CA3A7F0AD690C9A7675F59F73E5DA3A2FEEF7F9BF8837C610889A01BD54B847DF6541E8577ADF4ADE322844D07CEE7B48BE335F92F410C3DD5B25E9538C0C0515E6ABD2D00718ED43222CBD471BF002FBE846C0FA03DC01EFAD7CFCA616A27744DBEC8BEB00EC1292941432EAF6E427C1B01FBD7EF37F94AC3692CA650000 , N'6.1.3-40302')

