CREATE TABLE [dbo].[Pomodoroes] (
    [PomodoroId] [uniqueidentifier] NOT NULL,
    [TaskId] [uniqueidentifier] NOT NULL,
    [StartTime] [datetime],
    [DurationInMin] [int] NOT NULL,
    [IsSuccessfull] [bit],
    CONSTRAINT [PK_dbo.Pomodoroes] PRIMARY KEY ([PomodoroId])
)
CREATE INDEX [IX_TaskId] ON [dbo].[Pomodoroes]([TaskId])
CREATE TABLE [dbo].[Tasks] (
    [TaskId] [uniqueidentifier] NOT NULL,
    [Name] [nvarchar](50),
    [TaskCount] [int] NOT NULL,
    [UserId] [uniqueidentifier] NOT NULL,
    [ProjectId] [uniqueidentifier] NOT NULL,
    [Task_TaskId] [uniqueidentifier],
    CONSTRAINT [PK_dbo.Tasks] PRIMARY KEY ([TaskId])
)
CREATE INDEX [IX_UserId] ON [dbo].[Tasks]([UserId])
CREATE INDEX [IX_ProjectId] ON [dbo].[Tasks]([ProjectId])
CREATE INDEX [IX_Task_TaskId] ON [dbo].[Tasks]([Task_TaskId])
CREATE TABLE [dbo].[Projects] (
    [ProjectId] [uniqueidentifier] NOT NULL,
    [Name] [nvarchar](50),
    CONSTRAINT [PK_dbo.Projects] PRIMARY KEY ([ProjectId])
)
CREATE TABLE [dbo].[Users] (
    [UserId] [uniqueidentifier] NOT NULL,
    [UserName] [nvarchar](20),
    [Password] [nvarchar](20),
    [ShowWarningAfterPomodoroExpires] [bit] NOT NULL,
    [PomodoroDurationInMin] [int] NOT NULL,
    [TeamId] [uniqueidentifier],
    [CurrentUserTeamId] [uniqueidentifier],
    [User_UserId] [uniqueidentifier],
    CONSTRAINT [PK_dbo.Users] PRIMARY KEY ([UserId])
)
CREATE INDEX [IX_TeamId] ON [dbo].[Users]([TeamId])
CREATE INDEX [IX_User_UserId] ON [dbo].[Users]([User_UserId])
CREATE TABLE [dbo].[Teams] (
    [TeamId] [uniqueidentifier] NOT NULL,
    [Name] [nvarchar](20),
    CONSTRAINT [PK_dbo.Teams] PRIMARY KEY ([TeamId])
)
CREATE TABLE [dbo].[UserTeams] (
    [UserTeamId] [uniqueidentifier] NOT NULL,
    [TeamId] [uniqueidentifier],
    [UserId] [uniqueidentifier] NOT NULL,
    [StartTime] [datetime],
    [StopTime] [datetime],
    CONSTRAINT [PK_dbo.UserTeams] PRIMARY KEY ([UserTeamId])
)
CREATE INDEX [IX_TeamId] ON [dbo].[UserTeams]([TeamId])
CREATE INDEX [IX_UserId] ON [dbo].[UserTeams]([UserId])
ALTER TABLE [dbo].[Pomodoroes] ADD CONSTRAINT [FK_dbo.Pomodoroes_dbo.Tasks_TaskId] FOREIGN KEY ([TaskId]) REFERENCES [dbo].[Tasks] ([TaskId]) ON DELETE CASCADE
ALTER TABLE [dbo].[Tasks] ADD CONSTRAINT [FK_dbo.Tasks_dbo.Projects_ProjectId] FOREIGN KEY ([ProjectId]) REFERENCES [dbo].[Projects] ([ProjectId]) ON DELETE CASCADE
ALTER TABLE [dbo].[Tasks] ADD CONSTRAINT [FK_dbo.Tasks_dbo.Tasks_Task_TaskId] FOREIGN KEY ([Task_TaskId]) REFERENCES [dbo].[Tasks] ([TaskId])
ALTER TABLE [dbo].[Tasks] ADD CONSTRAINT [FK_dbo.Tasks_dbo.Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[Users] ([UserId]) ON DELETE CASCADE
ALTER TABLE [dbo].[Users] ADD CONSTRAINT [FK_dbo.Users_dbo.Teams_TeamId] FOREIGN KEY ([TeamId]) REFERENCES [dbo].[Teams] ([TeamId])
ALTER TABLE [dbo].[Users] ADD CONSTRAINT [FK_dbo.Users_dbo.Users_User_UserId] FOREIGN KEY ([User_UserId]) REFERENCES [dbo].[Users] ([UserId])
ALTER TABLE [dbo].[UserTeams] ADD CONSTRAINT [FK_dbo.UserTeams_dbo.Teams_TeamId] FOREIGN KEY ([TeamId]) REFERENCES [dbo].[Teams] ([TeamId])
ALTER TABLE [dbo].[UserTeams] ADD CONSTRAINT [FK_dbo.UserTeams_dbo.Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[Users] ([UserId]) ON DELETE CASCADE
CREATE TABLE [dbo].[__MigrationHistory] (
    [MigrationId] [nvarchar](150) NOT NULL,
    [ContextKey] [nvarchar](300) NOT NULL,
    [Model] [varbinary](max) NOT NULL,
    [ProductVersion] [nvarchar](32) NOT NULL,
    CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY ([MigrationId], [ContextKey])
)
INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
VALUES (N'201607111749281_initial', N'Model.Migrations.Configuration',  0x1F8B0800000000000400D55D5B6FECB6117E2FD0FF20E8B138B16C1F14688DDD04CEDA0E168D8F0FCE3A69DF0E6889BB56A3CB46A21C1B457F591FF293F2174A8ABA50BC88A4A4D5AE11C038CBCB70C8F966381C72943FFEF7FBE2BBD738725E60968769B2742FCECE5D07267E1A84C96EE91668FBCDDFDCEFBEFDF39F16B741FCEAFC5CB7FB48DAE19E49BE749F11DA5F795EEE3FC318E46771E867699E6ED1999FC61E0852EFF2FCFCEFDEC58507310917D3729CC5972241610CCB1FF8E72A4D7CB8470588EED3004679558E6B362555E7138861BE073E5CBA650BD7B98E428007DFC068EB3A204952041066EDEAA71C6E509626BBCD1E1780E8F16D0F71BB2D887258B17CD53637E5FEFC9270EFB51D6B527E91A334B62478F1B15A0E8FEF3E6851DD66B9F082DDE285456F64D6E5A22DDDCF699C066996BA0E3FD8D52ACA48C36A4DCFEA961F9CF2F78746DC1815E4BF0FCEAA885091C165020B9401DCE273F11485FE3FE0DB63FA0B4C964911452C37981F5CD729C0459FB3740F33F4F6056E391ED781EB78DDFE1E4FA0E92EE94B67F34311E27F7FC2BC80A70836B2F77AC93C82FC979124360864E811C3BAA6720310A4BFFB3BDE1459299075721F2675E775823E5E5AF3B0CE3785EFC33CDF125154A4BE4FD3088244E8FB09BC84BB7264C962B8CE17189595F973B8A79AD640E42B6D7197A5F1973462A450567CDDA445E693654865B58F20DB41D4E566E1B5C0ED85331D580765D26A7E18D718B285F004D8237F6B02D8FE61EBED3AF7E0F54798ECD0F3D2FD2B36D777E12B0CEA828AE84F49886D3DEE83B2C248455629B6DCE3208A2D743672B6F8E7BFA18F6CA928F15ED193439ED695D0CD3B90672B1A503790EFD4D60A61A380B9949D4A83385EDA5241F7982A99E2F5714124A56682D6723C9042390B65CD28D56FA4A4DDC868C323EC632D2EADB7B161909EC30C0C40A9A1D208FB8454A5068185A2538714D26A7E98D416D0162313584E42420392CB29F68ACF20CF7F4BB3E0D0E36C9ED3DFFE09B20413BFDE2298D59EC6EDEB3ECC602E7840B61B4D456E420FED11829817627F8F55916530414474069DD5DA8AFBCAAD39AE28CD73774B694A85BD8DA9B2DDD8AA61245C94FB83C0455B2A180BA66AC8C64626A1E6A49922CF4C5321AC4AB756B630E64E6E292AAD938B5B1DC1C9AD2068EDE44AA03BEDEE36CCA00C80AA5661040748D4A589A14A1123812AFDA3826AF96714546B52667BED7120CB5ACE217BEE04D0B5B7FA136CF68303121B94EE8DFAD96F36868895197B11CFA30F3286A65EC98DF5A1E63ACF533F2CD9E83AFE95ABDC9DD06D1238BD7E3335858CC78D0D2256A2708FD5068FBE742F5C5E3D1E921B1841049D6B9F062C5720F74120CA16CF203063A7312F2D3B344CD3E5E52FC210584521716D4210ADB05CB0D2870912F5394CFC700FA2BEA5E03AD99DCEC8649B51F89A1BB887498099EC9BFAE8E19B513819E85668E13188EA071A13395089551646E897E9F9D9D985205629C16120B1995FBB2B2BD9916CD10C3BA545B29B9FC4496E0952A37210251067620241F92668057F71C6E3069E01F8DD2D47254AC5FED395A60C22A2445544652A608AB94128910E3F1350A4EBF97EB052EAAE56AC5DEF6022AC744F97FDE664D2FD7D1CC658B64DE42C8F820DC3182B877163CF8431CD46250B7BF40341B351498225761B95ADA3D1AB3F92AB025BD75146ECDDE88CC0F24CFA22ACFBC9EB4AF7C259791C91DF3E33A7A3E6118439AEE497D61AA01E1F5B52B68DF65DE9EDB5DDD948268771634F8E317A2EC77D10EE01330E67A41CBECAEE18B11A5401ADBC8A24F2C021743710711473D7694301021C05F4758954F76702010A3D4DE7EAC02965A08E16684854414EA13F35AB3AE669D85264BE748C0C46561168BD2B8E0823726119EABB48A68DF4B29247A02E06D330CE2EB880635DE884A152F1C95B87EEDC0CE6CDBE141027AD8A06E8E2013A4675C7FF434C9409C74B26AA080BE802032CA314877D1315E3004CFF8AB7D113E562A7E25C7B4EBA06675D8E63FDACE5A75BDDC28D9938B53B3D1317DD4E8383DBF08977DCCE03495C0D6DD541427794D031AA3B391C60A2CC8B2285ADD248563C52D85BAA434B937B3D29D989D4DEAE81BFCBEE44ADF3D1B715493DDC1116BABEF568BCABA66EE1D197DC55C1C2533CF95EDC83FD3E4C76CC13F0AAC4D9D0F7DFAB6F36F6AFA4634AC3F33B9AC2FB82CD4828CDC00E72B57868CCE95D98E5E80620F004C805DC2A888566BC2FA97074EAD17877519457EDFED43DC8BF69AFEEC36D89AB5D75B9C3F389899F4EA606254011BB3AE4F13D8840D6F3DE7A9546459CE8DE70F751AB1D7F9692EA30A0A6C25C74B2849862735ADC531F961E57654E937B95CDD2E4AA449A0B8F93A170441200229C2BBB8833C2A3CA35D4615166B90C7028EF7658D4D0E7242C0D5A6287DEEA4534CF4A556C4EAB0EB3B08454A1173515E692B1A39CEABBC7A321AC392D0D3078D5F17580BD53F59C7241C703EE482251F9923A79C87C330361C8BB1D5641480F510E6DA985AA354F5C3BC0684A2DB62FDD23D6CEA6A66B6C3103F9EB56D9AE3E78EBAB6FF33AF65171C3A7A6227902CB1294549F8C4ED1D3E4808D54728437D948A5DD0E2B9D7761D786CAA109360EB36F76F25001BC1FD98795EE3476774A17BD7D9ED8255597CE8FBBEE8958F4A4EB38ACCC5BAEEB4C5C62727897F8A0BAB770564EF457F5650C33BA1563CA5BA8D1DE7D2F4FF8001E84E565E23A274F679B67B38653E6231DD6A267C37732BB52D7993846921516437B862BAC52E9AFEABB5E2BD18B31C3918C1D46F43D53D68B5E8875F14D1A9BD3C4BCB8D8D6A28A33E9BF7920049E6813D7C1D37F09031274DABCE508C667A4C1D9E6D7681585909C3FEB06F72009B73047F421BD7B797E71C97D43E174BE67E0E5791049E274B28F1A748576848F0D1449F86B014372431D6E4312BF1EF5E101919C7011BD4E02F8BA74FF53F6BF72D6FFAAACD707E721C392BE72CE9DFF8E4F15080082A8FCDD523249C89366CA85048A537CC9E02944FD0CD97D4760007AA6C9F11F8D1AEA605362C90BC8FC679009A9BE769213D2FB8748AD9BB53208CD94C428340BC9D4831869A88CE2A5E35F8C54728DA68F5007695C6CFEA4F7E3EB855D82F980E552F91B76C9DFA317AA8D78F52CD6A5B511E1F3BE27226B98E6CD6D0FE353BC8798C06EAADF305D2F4998ABB9C8843267BC0F3826843B3EF3482BAF31F563767731D363C6E4E6C35B319D06D9A7EF0EB464D3A5D58E77A44F41EF4EC3FF99CC9BE71381CDE81C28F9F588F9AEF4C1CEACF9AD33A6B42AEEECDF6D0AEB1459AB3428328FC48DD77F8227FACDDC4CC7EB0907CF2171B3A4DEB179BCF4E5E17CA9BB732661BEA3A4CBDE04DDA9E42CD0314FD67C17F29E60BC934AB49D379FEFB85831D6D70993674F3F09D03061768A1C5961DB3FE04630B7B08DB77DCD55E05C8EDEC95A86394F037382C4D80F7D0729C146323AD4D7919AF4CE4129C8277F86E8C93738C1D45E316B83979B3C71B7376F975EC02FDDE08948990642EA5AF111A634AF5799D62BA32DCFC41158AF832222E7758D947145DEAA342957990D2CA32CCF9C1256A374A8C4D5288BA5AB21CD2B9471AB20DD56A9B8960F314B82B12CA7589BBC26E46D9D4E06B1963545F0E500139A265358C871D526500AE984A7940D3C6C4A42AFB6F0B4F27DB56B3FFBD426C8E8B59F94A05313C17074E6AEFD740E65EF26CBCFB5B77ABCD3D14DCE3C4806AEF8FA10BB5ECCFF9709BB7D79B86B4990379509F43B4E57D3669D6CD3DAF7E338AA9B70574BF71081007B64D7190AB7C047B89ABCF62A3FEAFC33880ADCE4367E82C13A7928D0BE4078CA307E8ADED8C5203E64DFF8659A7197E7C5C3BEFC06EC1453C06C86E446EC21F9BE08A3A0E1FB4EBCA3539120CEE90F10975359625F17C1DD5B43E9539A1812AA96AFF1A91F61BC8F30B1FC21D98017388437AC873FC21DF0DFEA47A46A227A4174977D7113825D863DAC8A46DB1FFFC4180EE2D76FFF0FDFA005CA9E6C0000 , N'6.1.3-40302')

