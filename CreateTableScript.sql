CREATE TABLE [dbo].[Pomodoroes] (
    [PomodoroId] [uniqueidentifier] NOT NULL,
    [TaskId] [uniqueidentifier] NOT NULL,
    [StartTime] [datetime],
    [DurationInMin] [int] NOT NULL,
    [IsSuccessfull] [bit],
    CONSTRAINT [PK_dbo.Pomodoroes] PRIMARY KEY ([PomodoroId])
)
CREATE INDEX [IX_TaskId] ON [dbo].[Pomodoroes]([TaskId])
CREATE TABLE [dbo].[Tasks] (
    [TaskId] [uniqueidentifier] NOT NULL,
    [Name] [nvarchar](50),
    [PomodoroCount] [int] NOT NULL,
    [UserId] [uniqueidentifier] NOT NULL,
    [ProjectId] [uniqueidentifier] NOT NULL,
    CONSTRAINT [PK_dbo.Tasks] PRIMARY KEY ([TaskId])
)
CREATE INDEX [IX_UserId] ON [dbo].[Tasks]([UserId])
CREATE INDEX [IX_ProjectId] ON [dbo].[Tasks]([ProjectId])
CREATE TABLE [dbo].[Projects] (
    [ProjectId] [uniqueidentifier] NOT NULL,
    [Name] [nvarchar](50),
    CONSTRAINT [PK_dbo.Projects] PRIMARY KEY ([ProjectId])
)
CREATE TABLE [dbo].[Users] (
    [UserId] [uniqueidentifier] NOT NULL,
    [UserName] [nvarchar](20),
    [Password] [nvarchar](20),
    [ShowWarningAfterPomodoroExpires] [bit] NOT NULL,
    [PomodoroDurationInMin] [int] NOT NULL,
    [TeamId] [uniqueidentifier],
    [CurrentUserTeamId] [uniqueidentifier],
    CONSTRAINT [PK_dbo.Users] PRIMARY KEY ([UserId])
)
CREATE INDEX [IX_TeamId] ON [dbo].[Users]([TeamId])
CREATE TABLE [dbo].[Teams] (
    [TeamId] [uniqueidentifier] NOT NULL,
    [Name] [nvarchar](20),
    CONSTRAINT [PK_dbo.Teams] PRIMARY KEY ([TeamId])
)
CREATE TABLE [dbo].[UserTeams] (
    [UserTeamId] [uniqueidentifier] NOT NULL,
    [TeamId] [uniqueidentifier],
    [UserId] [uniqueidentifier] NOT NULL,
    [StartTime] [datetime],
    [StopTime] [datetime],
    CONSTRAINT [PK_dbo.UserTeams] PRIMARY KEY ([UserTeamId])
)
CREATE INDEX [IX_TeamId] ON [dbo].[UserTeams]([TeamId])
CREATE INDEX [IX_UserId] ON [dbo].[UserTeams]([UserId])
ALTER TABLE [dbo].[Pomodoroes] ADD CONSTRAINT [FK_dbo.Pomodoroes_dbo.Tasks_TaskId] FOREIGN KEY ([TaskId]) REFERENCES [dbo].[Tasks] ([TaskId]) ON DELETE CASCADE
ALTER TABLE [dbo].[Tasks] ADD CONSTRAINT [FK_dbo.Tasks_dbo.Projects_ProjectId] FOREIGN KEY ([ProjectId]) REFERENCES [dbo].[Projects] ([ProjectId]) ON DELETE CASCADE
ALTER TABLE [dbo].[Tasks] ADD CONSTRAINT [FK_dbo.Tasks_dbo.Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[Users] ([UserId]) ON DELETE CASCADE
ALTER TABLE [dbo].[Users] ADD CONSTRAINT [FK_dbo.Users_dbo.Teams_TeamId] FOREIGN KEY ([TeamId]) REFERENCES [dbo].[Teams] ([TeamId])
ALTER TABLE [dbo].[UserTeams] ADD CONSTRAINT [FK_dbo.UserTeams_dbo.Teams_TeamId] FOREIGN KEY ([TeamId]) REFERENCES [dbo].[Teams] ([TeamId])
ALTER TABLE [dbo].[UserTeams] ADD CONSTRAINT [FK_dbo.UserTeams_dbo.Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[Users] ([UserId]) ON DELETE CASCADE
CREATE TABLE [dbo].[__MigrationHistory] (
    [MigrationId] [nvarchar](150) NOT NULL,
    [ContextKey] [nvarchar](300) NOT NULL,
    [Model] [varbinary](max) NOT NULL,
    [ProductVersion] [nvarchar](32) NOT NULL,
    CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY ([MigrationId], [ContextKey])
)
INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
VALUES (N'201607161209048_initial', N'Model.Migrations.Configuration',  0x1F8B0800000000000400D55C5B6FE4B6157E2FD0FF20E8B1D88C6C2F0AB4C64C02676C0746637BB1E3A47D336889336623511389726C14FD657DC84FCA5F28A92BC58B485D4663630163259287873C1FCF853A67FEF8DFEFCBEF5EA3D07981498A62BC724F1727AE03B11F0708EF566E46B6DFFCCDFDEEDB3FFF69791544AFCECF55BFCFAC1F1D89D395FB4CC8FEDCF352FF1946205D44C84FE234DE92851F471E0862EFECE4E4EFDEE9A907290997D2729CE5D70C1314C1FC813EAE63ECC33DC940781B07304CCBF7B465935375EE4004D33DF0E1CACD7BB8CE4588009D7C03C3ADEB008C63020865EDFCA7146E4812E3DD664F5F80F0E16D0F69BF2D085358B27CDE74B7E5FEE48C71EF35032B527E969238EA49F0F473B91D9E387CD0A6BAF576D10DBBA21B4BDED8AAF34D5BB95FE2280EE224761D71B2F37598B08EE59E2EAA9E9F9CFCF9532D6E8A0AF6EF93B3CE4292257085614612407B7CC99E42E4FF03BE3DC4BF40BCC25918F2DC507E685BEB057DF52589F730216F5FE156E0F126701DAF3DDE1309D4C315638BD5FC9021FAFF3BCA0B780A612D7BAF93CC03487F1949624340421E28AC2B2A9780C0E2B97BE06596E402B9C1B70857836F30F97CD69B879B7493F93E4CD32D134549EAFB380E21C0D2D83BF08276F9CC8ACD709DAF30CC1BD367B42F4EDA82353C563B0E53D7B94EE2E86B1C9663B8A6C70790EC20A12CC4EAF64D9C25BEB09EA5D7C0B713D405832640B35EF383B942525F204F8040F6B72240B520D5E1AE730B5E7F8478479E57EE5FA9D2BE46AF30A85E94447FC2886A7C3A862499718E4A84EB98EAF07160A5BA3A19B962FAF86FE893BE54B4C8E7B13D0EFF15BE75F8AFCE873567C54A956C956D8F6C8E1653AD06E948B65B5507B28B21263D2537AC4166A5792BF1C1358DD20AF516192D5DD1F10886AE816B6F3B370CE97368884E3BA23E489688150F911ACF83C052C0D78414D66B7E98548AB12F462650A88C8401246793981190A6BFC54970E87936CFF16FFF0409A6C42FB604269506BE7ADDA3846970C145EA6B7F4A7213BA700F1044A210BB47ACB324819830D1590C1E705A8D1A5D3CA70A656FCD055D81DAF6D2864746B86D76EBB7B2C7D9340DB16D6CB87E3B6AE2E28ED40D4A33D7B48EF37FF34D32FABFB4D711FCDF1282BDFD5F0574A7B56EC3144A2748346EA209AA927328A37862A816885140B5F8A3836AFE6714542B5276B6F63890E535E7109B3B0174FB6BFD098CFDE01B8B0D89F756E3FAAB794BC4AA2C8E8CE74962190B55AFE5A665086CCECF459AC63ECAD9E0CC321F73B697748503C7108016EAB00A5FA946A4A708EDE9B9A1D3AFDC53573C1FF7F812869040E7C22FAE34D720F541200B972E21B0E5A6D6300D37CDCD649BA3BF4813D1930A99878340B8A6E2A1671F61221F6B847DB40761F77E08C37A5CE1B015D793882D97700F714079EC5EFFB8D9EB49043998F667E971B0EA465B3B30D3495713A571B2AD42F159C0A6B9E6E806FE4430536E858D98B57701BD70A65CFAE8E967001A1753E8C4AA0A301A99161A79167CA9EEAE660197BC0336A2555F1FF48295BCE27113CF0028CEE9D61A258507CEC9317738DA723C592C4E25512A092A80A142E854C64D5A89956551FAB8FDEC9AB4E27113CFA4691A8FB2EB8C2BDCCBB63455109125AA23AAD21DB6981BAC3EA4E967028A723F3F0E56F2B36B146BDBF99F082BEDCBA3190DDE388CF16CCF68A52439BC3343558479740CA12360227D45C504BEAA3E595116CBFB91B4BC981281C3E86E201128A6AED3449652A425A1AF4DA4BCE39508142E8E6170E9512A19A8C2010389F2CE4C1A5F40DFC47C710B26339F1F448B9975049AD32C10E144DEDEC3D63762AE97E633B2884273505FB35FCB4C82B23916E78870E811D5447B91161B207CDB9397DF11635A44993CD735E23A56AF0E0E4D1B3860DDFC571279D1BA78C714F1708C96A7A363AD8A40E5000BE5AFB715E0D6F8E1264F9C67B438885D90961D6FD3460D94287717A916AAC6B5B4702E058ECDAB56BB93A68D1BB3F042F1762C5CF6932C3CA5E10B6FF94623245E5DBFD676B96E5B7A45CE69F962E969925397B760BF4778C725AB966F9C4D91A9BAFE66D33F9F332A68787EEBF4885E443D138913B083422B9D9A727A8D92945C02029E00FB12B00E22A99BE885684C64359BE868C8F2AA0C673582FDBF18D54E31553869E5906BBA9E8879786C695061A1E4A10E4B130621483A3243D7719845D8946DDA45ADBA95E529E96E6AF554B82F2E3C21EEB53D2D21E780A72734D9D314F247799A42934C73E90932949C6B09205244D2469C151E7536D584C5DCA7ED8F43F5B0C3A2A6F8AECDD328DED85310B23655C7A16CB2A75905513C315D60D5C159730FDDE24A7F3D7D34A4D5EEE600C557064003F49E6EE4941B3A1E78471289CECF34C943E5B65808433DECB007A4C9C813E9F4560275CE5D0B18F5DB1E66CC9455D7326EA6CEFDD55887E9D374E961E8CBFBC796CAD6DC49EAA92872F278828AE67773A60A777C804155C44036065539ECB0D2F9107A6DA81CEAEBAA61FAAD9F3C7400EF46F661A53B8DDE9DD2556FF2A5DAA4AAB733E34E8A7EC52EF5EC75142C44BBCB32F234D76B4AA168D1C575E816BDA08085A19BB794C068C13A2C36BF86EB1041E689561D6E01465B989222C7CF3D3B393D13EA3FDF4F2DA697A641A888DC5505996D791DA15032C3E8D70C22F6B5036D11BBE81955342993933E6ADCE000BEAEDCFFE4E3CF9D9B7F3D16243E39F70995F4B973E2FC777C1663000824F97343C9A6564099C48F1814A7A8C27C42A49BA17ED58F03D0334D65E268D4DC7159DAF80524FE3348A42AA47E925316250E915C3BA97610A20B12A3102DD57A0D62A4A6D28397DEB5764394D8844570C70763BF82B301DB354D31D8E88D120BC3949B75D6FFE40A75601391B52CFB1274F2F892AF213AA79DFA3FCC8AE62474E7DC66C3B435645DC01963C3E45CAC19AB8B0EAF364C90ED5F3F3350754C57D732DE5D7C0F407F1F167E329F55ACC4B1A37398EA9363D59A34E94DF35697CC554BD2F1D5F423578F1CB160C40AADD31688CC5813628DCD0F520372ACB28F3951A2F9207590B4596B7C7C847A8EB1251C56009BB06A63CEFCFB0F946FDF599B31959C253AF679FA1F42DE13CCF7AE6A2C8E59EF373756E63400BDB072F45A09399951949BBA12A2B310A2F80A45E3A52716361471129FB46F5128A1AD9350D156E75E6B4A28BA2A28948C6BF2E095550EDAF20A1565755EADAAF2425B78A1DC0D659EB2AE26A3B32443C7B57A8A792A36A4ACFBEE020501AFED74D7F7578FA12AC130D69F18B7E47805175222F9511633515185540E60CCAB372EFF988513C396248DD256701DB934A21FF4A65A5A8FE20739CD839A77EEC7BBA96B91A25D4382FD9437867ECBB0D77D6EF036AEFC0B81A3AA8B70BB790B0908A8D5BF4808DA029FD066F6593DFF61AF9F4198D12E57D1130C6EF07D46F619A14B86D153F8C66F06F353BAE6CF2B3CDA3C2FEFF7F9EF004DB104CA266297B2F7F8FB0C8541CDF7B5E2E3AB860473807E80F47D214BEA4F11B87BAB29DDC5D89250B97DB5DFF600A37D4889A5F778035EE010DE28FC7E843BE0BF55D93A7A226641B4B77D7989C02EA156BCA4D18CA78F14C341F4FAEDFF0164DF9A55C35E0000 , N'6.1.3-40302')

