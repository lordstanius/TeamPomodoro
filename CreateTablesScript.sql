CREATE TABLE [dbo].[Pomodoroes] (
    [PomodoroId] [uniqueidentifier] NOT NULL,
    [TaskId] [uniqueidentifier] NOT NULL,
    [StartTime] [datetime] NOT NULL,
    [DurationInMin] [int] NOT NULL,
    [IsSuccessfull] [bit],
    CONSTRAINT [PK_dbo.Pomodoroes] PRIMARY KEY ([PomodoroId])
)
CREATE INDEX [IX_TaskId] ON [dbo].[Pomodoroes]([TaskId])
CREATE TABLE [dbo].[Tasks] (
    [TaskId] [uniqueidentifier] NOT NULL,
    [Name] [nvarchar](50),
    [PomodoroCount] [int] NOT NULL,
    [UserId] [uniqueidentifier] NOT NULL,
    [ProjectId] [uniqueidentifier] NOT NULL,
    CONSTRAINT [PK_dbo.Tasks] PRIMARY KEY ([TaskId])
)
CREATE INDEX [IX_UserId] ON [dbo].[Tasks]([UserId])
CREATE INDEX [IX_ProjectId] ON [dbo].[Tasks]([ProjectId])
CREATE TABLE [dbo].[Projects] (
    [ProjectId] [uniqueidentifier] NOT NULL,
    [Name] [nvarchar](50),
    CONSTRAINT [PK_dbo.Projects] PRIMARY KEY ([ProjectId])
)
CREATE TABLE [dbo].[Users] (
    [UserId] [uniqueidentifier] NOT NULL,
    [UserName] [nvarchar](20),
    [Password] [nvarchar](20),
    [ShowWarningAfterPomodoroExpires] [bit] NOT NULL,
    [PomodoroDurationInMin] [int] NOT NULL,
    [TeamId] [uniqueidentifier],
    [CurrentUserTeamId] [uniqueidentifier],
    CONSTRAINT [PK_dbo.Users] PRIMARY KEY ([UserId])
)
CREATE INDEX [IX_TeamId] ON [dbo].[Users]([TeamId])
CREATE TABLE [dbo].[Teams] (
    [TeamId] [uniqueidentifier] NOT NULL,
    [Name] [nvarchar](20),
    CONSTRAINT [PK_dbo.Teams] PRIMARY KEY ([TeamId])
)
CREATE TABLE [dbo].[UserTeams] (
    [UserTeamId] [uniqueidentifier] NOT NULL,
    [TeamId] [uniqueidentifier],
    [UserId] [uniqueidentifier] NOT NULL,
    [StartTime] [datetime],
    [StopTime] [datetime],
    CONSTRAINT [PK_dbo.UserTeams] PRIMARY KEY ([UserTeamId])
)
CREATE INDEX [IX_TeamId] ON [dbo].[UserTeams]([TeamId])
CREATE INDEX [IX_UserId] ON [dbo].[UserTeams]([UserId])
ALTER TABLE [dbo].[Pomodoroes] ADD CONSTRAINT [FK_dbo.Pomodoroes_dbo.Tasks_TaskId] FOREIGN KEY ([TaskId]) REFERENCES [dbo].[Tasks] ([TaskId]) ON DELETE CASCADE
ALTER TABLE [dbo].[Tasks] ADD CONSTRAINT [FK_dbo.Tasks_dbo.Projects_ProjectId] FOREIGN KEY ([ProjectId]) REFERENCES [dbo].[Projects] ([ProjectId]) ON DELETE CASCADE
ALTER TABLE [dbo].[Tasks] ADD CONSTRAINT [FK_dbo.Tasks_dbo.Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[Users] ([UserId]) ON DELETE CASCADE
ALTER TABLE [dbo].[Users] ADD CONSTRAINT [FK_dbo.Users_dbo.Teams_TeamId] FOREIGN KEY ([TeamId]) REFERENCES [dbo].[Teams] ([TeamId])
ALTER TABLE [dbo].[UserTeams] ADD CONSTRAINT [FK_dbo.UserTeams_dbo.Teams_TeamId] FOREIGN KEY ([TeamId]) REFERENCES [dbo].[Teams] ([TeamId])
ALTER TABLE [dbo].[UserTeams] ADD CONSTRAINT [FK_dbo.UserTeams_dbo.Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[Users] ([UserId]) ON DELETE CASCADE
CREATE TABLE [dbo].[__MigrationHistory] (
    [MigrationId] [nvarchar](150) NOT NULL,
    [ContextKey] [nvarchar](300) NOT NULL,
    [Model] [varbinary](max) NOT NULL,
    [ProductVersion] [nvarchar](32) NOT NULL,
    CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY ([MigrationId], [ContextKey])
)
INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
VALUES (N'201606102246278_initial', N'Model.Migrations.Configuration',  0x1F8B0800000000000400D55C5B6FE4B6157E2FD0FF20E8B1D88C6C2F0AB4C64C02676C0746637BB1E3A47D336889336623511389726C14FD657DC84FCA5F28A92BAF1275198D8D058CB5481E1EF27C3C17F21CFFF1BFDF97DFBD46A1F3029314C578E59E2E4E5C07623F0E10DEADDC8C6CBFF99BFBDDB77FFED3F22A885E9D9FAB7E9F593F3A12A72BF79990FDB9E7A5FE338C40BA88909FC469BC250B3F8E3C10C4DED9C9C9DFBDD3530F52122EA5E538CBAF19262882F92FF4D7758C7DB82719086FE3008669F99DB66C72AACE1D8860BA073E5CB9790FD7B90811A0936F60B8751D80714C00A1AC9DFF94C20D4962BCDBECE907103EBCED21EDB705610A4B96CF9BEEB6DC9F9C31EEBD666045CACF5212473D099E7E2EB7C393870FDA54B7DE2EBA61577463C91B5B75BE692BF74B1CC5419CC4AE234F76BE0E13D6B1DCD345D5F39393FFFEA916374505FBF7C9596721C912B8C2302309A03DBE644F21F2FF01DF1EE25F205EE12C0C796E283FB44DF8403F7D49E23D4CC8DB57B89578BC095CC713C77B32817AB8666CB19A1F3244FF7F4779014F21AC65EFB5927900E92F23496C0848C803857545E5121058FCDE93D26596E412BAC1B70857D46E30F97CD69BD44DBAC97C1FA6E996C9A624F57D1C87106065EC1D7841BB7C66CDEEB8CE5718E68DE933DA17476FC11A1E2B11A4AE739DC4D1D7382C87342D8F0F20D941421988B5CD9B384B7C69314BAF01732BC40BEEBAE0CD7ACD0FED0A577D613D011ED9CF8A00D58954A3BBCE2D78FD11E21D795EB97FA52AFC1ABDC2A0FA5012FD0923AAFFE91892649D7354125CC754A38F432AD5DCC9C815D35FFF0D7DD2978A11F61CB0C760BF02B701FBD5D1B0E6AA58A596A7B2ED914D21B0243428A7516CD51DC6368698E4B4DCB0069595E6ABC207D7344A23D45BD469F38A8E4730790D547B5BBC61289F433BB41A10FD29B244AC7C86F4781E049602BE5D4861BDE68749A514FB62640265CA487480E46C121302D2F4B738090E3DCFE639FEED9F20C194F8C596C0A452C057AF7B94C054F18DFADA9E92DC84BEDB0304912CC4F611EB2C4920264C741683079CD64E8D2E9F538DB2B7E682AE406F7869C323232C1ADDFAABEA6C364D436C1B1B6EDE8E9AB8BC237583D6CC35ADE37CDF7C933A7D5FDAEB08BE6F09C1DEBEAF06BAD35AB7610AA51524061FB10BAA8A6FA8A27862A81688D140B5F861826AFE6314542B5276B6F63890E535E7109B3B0174FB6BFD098C7DCBDD45D7C0786F35AEBF9AB744ACCEE2A8789E2496B150F5466E044360737E2ED234F651CE066796B980535CD1150E9CF6E8B3508655E44AF5213D43684F4F0D9D7CE59EBAF2E9B8C7973084043A177E71B5B906A90F0255B47401812533B57A6998692E284586FEA2CC438F2964EE0D02E19ACA861E7C84897AA611F6D11E84ADBB218DEA7175C3D65BCF21B75CC23DC40165B175F5E326AFE79084D0B53B4B8F43543BD0C498CC245A4380C649B68AC267419AE186A31DF513814CBB153662365E03F4829976E9A3A79F01685C386112AB2EB668645A28E359F0A5BBB69A055CEA0ED888567F73D00B56EA8AC74D3C03A0387FDB689134CE3727C7DCD710E578B2589C2AA2D412D4004387D0A94C9BB2122BCBA2756FFB993565C5E3269E49D334CE64DB19D77896A234751051256A22AAD31DB6981BAC3E94E967028A763F3F0E56F2B3DB2956D1EF9F082BE2BDD18C066F1CC678B667B4528A1CDE99A12A223C3A86D01130511E4F3181AFBAD72ACA62793592967752327018DD0D24EA836513542A7196823E914879BDAB10285C9C8EC1A547A965A00A073A4894D765CAF802FA5DCC1717602AF3F941B498D944A039CD12114EE4E21EF26FC35C27FDEBB18CC1CE70BEE6BD169882E3CE289CA3C1F12AAB087181168B979EF4D4B5B7C497161126CF758DB696C5EB03C3AEFD1BB06EFE71445DB429D6E98A763846CB93D1B2564D90728085F2B7DA1A641B7CF02E2F9C67B438846D88569DEEAE8D1A2851EE0A522F54835B69E1584A1C77AF5AEF4A766DDC9885174AB765E1AA8F64E1250D5FB8E0178D907875EB5ADBE4BA6DE91549A7E587A567C84E5DDE82FD1EE11D97AD5A7E713645AAEAFA9B4DFF84CEA8A0E1F9C2E9913D887A2612276007A5563A35E5F41A2529B904043C01F600B00E22A59BEC8118CC63359BEC64A8F2AA8C663582FDBF1825E6986A1CB472C8355D4FC4BC3BB634A8B150EA5087E5098310242DA9A1EB38CC22DC956EDA46ADBA91E529996E69CD54B887169E10F7D99E96946AC0D3939AEC694AF9A23C4DA949A5B9F424192A8EB50210251A1111678547934DEDC262EECFF6C7A17ED86151533C67F3348A2FF614A4444DDD71289BEC695601144FCC1454B570D6DC410B5C99AFA68F86B4DADD1CA0F8CAE06780DE338D9C7243C703EF482231F9995DF2D0B92D16C2D00F3BEC016912F1643ABD95409D6A2700A3FEDAC38C7525D309C6ADAB737F35D662FA0C5D7A18FAF2EE5150D986FB4833154D2A1E4F50D3FC6ECE54E18E0F30A89A18C8C6A06A871D563A1F42AF0D95437D55354CBFF5938709E0EDC83EAC74A7D1BB53BAEA4D9A9448AAFA3A33EE94E857EE52CF5E47C152B4BB2C23CFEE824D25142DBAB80EDDA21714B03074F39612182D5887C5E6D7701D22C83CD1AAC32DC0680B5352A4F6B96727A7675201E8FB29C6F4D234083591BBAE225394D7112A25338C7ECD20622F1D688BD845CFA8AA49959CF2A0718303F8BA72FF938F3F776EFEF55890F8E4DC2754D2E7CE89F3DFF1C98B0120904C5678891816A728BB7C42022135C7B85FC5E300F84C538D381A36775C76367E0189FF0C12A5FAA86DA3CCE0160A1187484E4CA61D04E982C428482B355E8318A9A9F4E0A5778DDD102D3661F1DBF1C1D8AFD06CC0764D5304367AA3E48230ED669DF53FB952FDD744642DCBBD249D3CBED46B88CE1153FE8799D19C84E99CDB6C98B176AC0D38636C989A88356355D1E1D5461764FBD7CD0C541DD3D5B38CF717DF03D0DF8785B7725AAD149D54816347E7205527C72A3269529BE6AD2B99AB8CA4E5D5F423578E1CB158C40AADD31687CC580F628DCD0F52FF71AC928F39516278903A48CAAC353E3E422DC7D8F20D2B804D58B13167EEFD07CAB56FADCB984ACE0A1DFB1CFD0F21EF09E67B57F515C7ACF59B1B2B731A805E58397A9D849ACC28CB4D5F05D15A0451BC42D170E989850D459854B5AA3909DA2209638D848EB63EF7DA503ED1563DA165DC9007AFAD70309656E828EBF36A755517C6A20BED6E68F3944DF518ADE51826AEF553CC51ADA1E4DCB79727486815935DDF5F3586AE00A3B3F8A4734B8E576EA1A4911F653113955428C5009D59F59DCB3F66D9C4B02529A38CB55B472E8CE807BDA996D6A3F4414DF2A0C69DFBDBDDD4B148D1AE21C1FE923786BE60D6EB3E37781B57DE85C451D545BADABC850404D4E65F24046D814F68337B53CFFF9AD7CF20CC6897ABE8090637F83E23FB8CD025C3E8297CE3378379296DF3E7F51D22CFCBFB7DFEC77FA658026513B11BD97BFC7D86C2A0E6FB5AF3F26A20C1DC9F1F20FD5EC8927A5304EEDE6A4A7731B624546E5FEDB53DC0681F5262E93DDE80173884370ABF1FE10EF86F55AE8E9948B720C46D5F5E22B04BA80D2F6934E3E9AF14C341F4FAEDFF01DC4A6388C25E0000 , N'6.1.3-40302')

